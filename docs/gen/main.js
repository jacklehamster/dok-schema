(()=>{"use strict";const t=/^[A-Z]/;class e{constructor(){this.registration={}}register(t,e){this.registration[t]=e,e.engine=this}getEntries(e){return e?Object.entries(e).filter((([e])=>e.match(t))).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({name:t,auxiliary:e,processor:this.registration[t]}))):[]}process(t){var e,n,o,i,r,s;return o=this,i=void 0,s=function*(){if(!t)return void console.warn("No entity to process.");for(const{processor:t}of this.getEntries(this.entity))yield null===(e=null==t?void 0:t.onExit)||void 0===e?void 0:e.call(t);this.entity=t;const o=this.getEntries(t);for(const{name:t,processor:e}of o)e||console.warn(`No processor for auxiliary: ${t}`);for(const{processor:e,auxiliary:n}of o)yield null==e?void 0:e.onCreate(n,t);for(const{processor:e,auxiliary:i}of o)yield null===(n=null==e?void 0:e.process)||void 0===n?void 0:n.call(e,i,t)},new((r=void 0)||(r=Promise))((function(t,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function c(t){try{a(s.throw(t))}catch(t){e(t)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof r?o:new r((function(t){t(o)}))).then(n,c)}a((s=s.apply(o,i||[])).next())}))}}const n=JSON.parse('{"$schema":"../entity.json","Breadcrumbs":{},"Workspace":{"apps":[{"Id":"hello-world-app","Title":"Hello World Application","Application":{"scenes":[{"Id":"hello-world-scene-1","Message":"Hello World"}]}},{"Id":"hello-world-app-2","Title":"Hello World Application 2","Application":{"scenes":[{"Id":"hello-world-scene-2","Message":"Hello World 2"}]}}]}}');var o=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function c(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((o=o.apply(t,e||[])).next())}))};class i{onCreate(t,e){return o(this,void 0,void 0,(function*(){}))}onExit(){return o(this,void 0,void 0,(function*(){}))}}class r extends i{constructor(){super(...arguments),this.active=!1,this.refresh=()=>{}}process(t,e){return n=this,o=void 0,r=function*(){this.refresh=()=>{this.render(t,e),this.active&&requestAnimationFrame(this.refresh)},(null==t?void 0:t.initiallyInactive)||this.setActive(!0)},new((i=void 0)||(i=Promise))((function(t,e){function s(t){try{a(r.next(t))}catch(t){e(t)}}function c(t){try{a(r.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,c)}a((r=r.apply(n,o||[])).next())}));var n,o,i,r}setActive(t){this.active=t,this.active&&requestAnimationFrame(this.refresh)}}var s=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function c(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((o=o.apply(t,e||[])).next())}))};class c extends r{constructor(){super(...arguments),this.div=document.createElement("div")}onCreate(){return s(this,void 0,void 0,(function*(){document.body.appendChild(this.div)}))}onExit(){return s(this,void 0,void 0,(function*(){document.body.removeChild(this.div),this.setActive(!1)}))}}class a extends c{constructor(t){super(),this.listProperty=t}getEntities(t){const e=t[this.listProperty];return Array.isArray(e)?e:[]}activeElement(t){var e;return this.getEntities(t)[null!==(e=t.index)&&void 0!==e?e:-1]}process(t,e){const n=Object.create(null,{process:{get:()=>super.process}});var o,i,r,s,c;return i=this,r=void 0,c=function*(){yield n.process.call(this,t,e);const i=this.activeElement(t);i&&(yield null===(o=this.engine)||void 0===o?void 0:o.process(i))},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{a(c.next(t))}catch(t){e(t)}}function o(t){try{a(c.throw(t))}catch(t){e(t)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(n,o)}a((c=c.apply(i,r||[])).next())}))}render(t,e){const n=this.div;n.innerText="",this.getEntities(t).forEach((t=>{const e=n.appendChild(document.createElement("div"));e.style.color="blue",e.style.textDecoration="underline",e.style.cursor="pointer",e.addEventListener("mousedown",(()=>{var e;null===(e=this.engine)||void 0===e||e.process(t)})),e.innerText=`${t.Id}`}))}}class l extends a{constructor(){super("scenes")}}class u extends i{process(t){return e=this,n=void 0,i=function*(){const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.backgroundColor="silver",e.style.width="100%",e.style.padding="5px",e.style.margin="0px",e.style.opacity=".8",e.style.cursor="pointer",e.addEventListener("mousedown",(()=>document.body.removeChild(e))),document.body.appendChild(e),e.textContent=`${t}`},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function c(t){try{a(i.throw(t))}catch(t){r(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,c)}a((i=i.apply(e,n||[])).next())}));var e,n,o,i}}class d extends i{process(t){return e=this,n=void 0,i=function*(){document.title=t},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function c(t){try{a(i.throw(t))}catch(t){r(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,c)}a((i=i.apply(e,n||[])).next())}));var e,n,o,i}}class h extends a{constructor(){super("apps")}}class v extends i{process(t){return e=this,n=void 0,i=function*(){this.property=t},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function c(t){try{a(i.throw(t))}catch(t){r(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,c)}a((i=i.apply(e,n||[])).next())}));var e,n,o,i}}class f extends i{process(t,e){return n=this,o=void 0,r=function*(){console.log(t,e)},new((i=void 0)||(i=Promise))((function(t,e){function s(t){try{a(r.next(t))}catch(t){e(t)}}function c(t){try{a(r.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,c)}a((r=r.apply(n,o||[])).next())}));var n,o,i,r}}class p{static execute(t){t.register("Workspace",new h),t.register("Application",new l),t.register("Title",new d),t.register("Message",new u),t.register("Id",new v),t.register("Breadcrumbs",new f)}}const y={main:function(){return t=this,o=void 0,r=function*(){const t=new e;p.execute(t),yield t.process(n)},new((i=void 0)||(i=Promise))((function(e,n){function s(t){try{a(r.next(t))}catch(t){n(t)}}function c(t){try{a(r.throw(t))}catch(t){n(t)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,c)}a((r=r.apply(t,o||[])).next())}));var t,o,i,r}};globalThis.exports=y})();
//# sourceMappingURL=main.js.map