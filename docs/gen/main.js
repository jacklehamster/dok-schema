(()=>{"use strict";const t=/^[A-Z]/;class n{constructor(){this.registration={}}register(t,n){this.registration[t]=n,n.engine=this}process(n){var e,o,i,s,r;return o=this,i=void 0,r=function*(){if(!n)return void console.log("No entity to process.");const o=Object.entries(n).filter((([n])=>n.match(t))).sort((([t],[n])=>t.localeCompare(n))).map((([t,n])=>({name:t,auxiliary:n,processor:this.registration[t]})));for(const{name:t,processor:i,auxiliary:s}of o)i||console.warn(`No processor for auxiliary: ${t}`),yield null===(e=null==i?void 0:i.process)||void 0===e?void 0:e.call(i,s,n)},new((s=void 0)||(s=Promise))((function(t,n){function e(t){try{a(r.next(t))}catch(t){n(t)}}function c(t){try{a(r.throw(t))}catch(t){n(t)}}function a(n){var o;n.done?t(n.value):(o=n.value,o instanceof s?o:new s((function(t){t(o)}))).then(e,c)}a((r=r.apply(o,i||[])).next())}))}}const e=JSON.parse('{"$schema":"../entity.json","Workspace":{"apps":[{"Title":"Hello World Application","Application":{"scenes":[{"Message":"Hello World"}]}}]}}');class o{}class i extends o{constructor(t){super(),this.listProperty=t}process(t,n){var e,o,i,s,r,c;return i=this,s=void 0,c=function*(){const n=t[this.listProperty],i=(Array.isArray(n)?n:[])[null!==(e=t.index)&&void 0!==e?e:0];yield null===(o=this.engine)||void 0===o?void 0:o.process(i)},new((r=void 0)||(r=Promise))((function(t,n){function e(t){try{a(c.next(t))}catch(t){n(t)}}function o(t){try{a(c.throw(t))}catch(t){n(t)}}function a(n){var i;n.done?t(n.value):(i=n.value,i instanceof r?i:new r((function(t){t(i)}))).then(e,o)}a((c=c.apply(i,s||[])).next())}))}}class s extends o{process(t){return n=this,e=void 0,i=function*(){document.title=t},new((o=void 0)||(o=Promise))((function(t,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,c)}a((i=i.apply(n,e||[])).next())}));var n,e,o,i}}class r extends o{process(t){return n=this,e=void 0,i=function*(){const n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.backgroundColor="silver",n.style.width="100%",n.style.padding="5px",n.style.margin="0px",n.style.opacity=".8",n.style.cursor="pointer",n.addEventListener("mousedown",(()=>document.body.removeChild(n))),document.body.appendChild(n),n.textContent=`${t}`},new((o=void 0)||(o=Promise))((function(t,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,c)}a((i=i.apply(n,e||[])).next())}));var n,e,o,i}}const c={main:function(){return t=this,o=void 0,a=function*(){const t=new n;t.register("Workspace",new i("apps")),t.register("Application",new i("scenes")),t.register("Title",new s),t.register("Message",new r),yield t.process(e)},new((c=void 0)||(c=Promise))((function(n,e){function i(t){try{r(a.next(t))}catch(t){e(t)}}function s(t){try{r(a.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof c?e:new c((function(t){t(e)}))).then(i,s)}r((a=a.apply(t,o||[])).next())}));var t,o,c,a}};globalThis.exports=c})();
//# sourceMappingURL=main.js.map