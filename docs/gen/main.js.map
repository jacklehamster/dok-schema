{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@dobuki/dok-schema/./src/core/engine.ts","webpack://@dobuki/dok-schema/./src/processors/base/processor.ts","webpack://@dobuki/dok-schema/./src/processors/title-processor.ts","webpack://@dobuki/dok-schema/./src/processors/message-processor.ts","webpack://@dobuki/dok-schema/./src/processors/container-processor.ts","webpack://@dobuki/dok-schema/./src/processors/workspace-processor.ts","webpack://@dobuki/dok-schema/./src/processors/application-processor.ts","webpack://@dobuki/dok-schema/./src/index.ts"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst AUX_REGEX = /^[A-Z]/;\nexport default class Engine {\n    constructor() {\n        this.registration = {};\n    }\n    register(name, processor) {\n        this.registration[name] = processor;\n        processor.engine = this;\n    }\n    process(entity) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!entity) {\n                console.log(\"No entity to process.\");\n                return;\n            }\n            const entries = Object.entries(entity)\n                .filter(([key]) => key.match(AUX_REGEX))\n                .sort(([key1], [key2]) => key1.localeCompare(key2))\n                .map(([name, auxiliary]) => ({\n                name,\n                auxiliary,\n                processor: this.registration[name],\n            }));\n            for (const { name, processor, auxiliary } of entries) {\n                if (!processor) {\n                    console.warn(`No processor for auxiliary: ${name}`);\n                }\n                yield ((_a = processor === null || processor === void 0 ? void 0 : processor.process) === null || _a === void 0 ? void 0 : _a.call(processor, auxiliary, entity));\n            }\n        });\n    }\n}\n","export default class Processor {\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Processor from './base/processor';\nexport default class TitleProcessor extends Processor {\n    process(title) {\n        return __awaiter(this, void 0, void 0, function* () {\n            document.title = title;\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Processor from './base/processor';\nexport default class MessageProcessor extends Processor {\n    process(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const div = document.createElement(\"div\");\n            div.style.position = \"absolute\";\n            div.style.top = \"0px\";\n            div.style.left = \"0px\";\n            div.style.backgroundColor = \"silver\";\n            div.style.width = \"100%\";\n            div.style.padding = \"5px\";\n            div.style.margin = \"0px\";\n            div.style.opacity = \".8\";\n            div.style.cursor = \"pointer\";\n            div.addEventListener(\"mousedown\", () => document.body.removeChild(div));\n            document.body.appendChild(div);\n            div.textContent = `${message}`;\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Processor from './base/processor';\nexport default class ContainerProcessor extends Processor {\n    constructor(listProperty) {\n        super();\n        this.listProperty = listProperty;\n    }\n    process(container, entity) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const listProp = container[this.listProperty];\n            const elements = Array.isArray(listProp) ? listProp : [];\n            const element = elements[(_a = container.index) !== null && _a !== void 0 ? _a : 0];\n            yield ((_b = this.engine) === null || _b === void 0 ? void 0 : _b.process(element));\n        });\n    }\n}\n","import ContainerProcessor from \"./container-processor\";\nexport default class WorkspaceProcessor extends ContainerProcessor {\n    constructor() {\n        super(\"apps\");\n    }\n}\n","import ContainerProcessor from \"./container-processor\";\nexport default class ApplicationProcessor extends ContainerProcessor {\n    constructor() {\n        super(\"scenes\");\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Engine from './core/engine';\nimport helloWorldEntity from '../docs/samples/hello-world.json';\nimport TitleProcessor from './processors/title-processor';\nimport MessageProcessor from './processors/message-processor';\nimport WorkspaceProcessor from './processors/workspace-processor';\nimport ApplicationProcessor from './processors/application-processor';\nfunction main() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const engine = new Engine();\n        engine.register(\"Workspace\", new WorkspaceProcessor());\n        engine.register(\"Application\", new ApplicationProcessor());\n        engine.register(\"Title\", new TitleProcessor());\n        engine.register(\"Message\", new MessageProcessor());\n        yield engine.process(helloWorldEntity);\n    });\n}\nconst exports = {\n    main,\n};\nexport default exports;\nglobalThis.exports = exports;\n"],"names":["AUX_REGEX","Engine","constructor","this","registration","register","name","processor","engine","process","entity","_a","thisArg","_arguments","P","generator","console","log","entries","Object","filter","key","match","sort","key1","key2","localeCompare","map","auxiliary","warn","call","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Processor","TitleProcessor","title","document","MessageProcessor","message","div","createElement","style","position","top","left","backgroundColor","width","padding","margin","opacity","cursor","addEventListener","body","removeChild","appendChild","textContent","ContainerProcessor","listProperty","super","container","_b","listProp","element","Array","isArray","index","WorkspaceProcessor","ApplicationProcessor","main","globalThis","exports"],"sourceRoot":""}